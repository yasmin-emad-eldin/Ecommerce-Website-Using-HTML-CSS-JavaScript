<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./css/main.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link href='https://fonts.googleapis.com/css?family=Tajawal:400,100,600' rel='stylesheet' type='text/css'>
    <title>Electronics-Gategory</title>
</head>

<body>
    <header>
        <div id="topbar">
            <div class="search">
                <input id="searchbar" type="search" placeholder="Search Product..." onkeyup="search()">
            </div>
            <div class="rightbutton">
                <ul class="user-menu">
                    <li><a href="#">My Account</a></li>
                    <li><a href="cart.html">Your Cart</a></li>
                    <li><a href="checkout.html">Checkout</a></li>
                    <li><a href="register.html">Login</a></li>
                </ul>
            </div>
        </div>

        <section id="bar">
            <div class="navbar">
                <a href="./Home.html"><img src="./images/logo.png" class="logo" alt=""></a>
                <nav id="menu">
                    <ul>
                        <li><a href="./categoryJelwery.html">Jelwery</a></li>
                        <li><a href="./categoryElectronics.html">Electronics</a></li>
                        <li><a href="#">Sport</a>
                        </li>
                        <li><a href="#">Hangbag</a></li>
                        <li><a href="#">Best Seller</a></li>
                        <li><a href="#">Top Seller</a></li>
                    </ul>
                </nav>
            </div>
        </section>
    </header>
    <section id="slidshow">
        <img id="sideimg" src="./images/slidshow/1.jpg" alt="penguin" height="330" width="100%" />
        <br>
    </section>
    <section id="product">
        <h4 class="title">
            <span>Latest <strong>Electronics</strong></span>
        </h4>
        <ul>
            <li>
                <div class="product-box">
                    <img src="" id="8" class="photo"></img>
                    <p class="titlee"></p><br />
                    <h3 class="price"></h3>
                </div>
            </li>
            <li>
                <div class="product-box">
                    <img src="" id="9" class="photo"></img>
                    <p class="titlee"></p><br />
                    <h3 class="price"></h3>
                </div>
            </li>
            <li>
                <div class="product-box">
                    <img src="" id="10" class="photo"></img>
                    <p class="titlee"></p><br />
                    <h3 class="price"></h3>
                </div>
            </li>
        </ul>

        <ul>
            <li>
                <div class="product-box">
                    <img src="" id="11" class="photo"></img>
                    <p class="titlee"></p><br />
                    <h3 class="price"></h3>
                </div>
            </li>
            <li>
                <div class="product-box">
                    <img src="" id="12" class="photo"></img>
                    <p class="titlee"></p><br />
                    <h3 class="price"></h3>
                </div>
            </li>
            <li>
                <div class="product-box">
                    <img src="" id="13" class="photo"></img>
                    <p class="titlee"></p><br />
                    <h3 class="price"></h3>
                </div>
            </li>
        </ul>
    </section>
    <footer>
        <h4 class="title">
        </h4>
        <section id="copyright">
            <span>Copyright 2022 Amira $ Mostafa & Yasmeen  All right reserved.</span>
        </section>
    </footer>
    <script>
        var i = 0

        var timeOut = function() {
            setTimeout(next, 3000);
        }

        var next = function() {

            var slide = document.getElementById("sideimg");
            var slides = ["./images/slidshow/1.jpg", "./images/slidshow/2.jpg", "./images/slidshow/1.jpg", "./images/slidshow/2.jpg"]
            slide.src = slides[i];
            timeOut();
            i++;
            if (i >= 4) {
                i = 0;
            };
        };

        next();
    </script>
    <script>
        ///////////////////////electronics///////////////////////////////
        function electronics() {
            var xhr2 = new XMLHttpRequest();
            xhr2.open('GET', 'https://fakestoreapi.com/products/category/electronics')
            xhr2.send()
            xhr2.onreadystatechange = function() {
                if (xhr2.readyState == 4 && xhr2.status == 200) {
                    var res = JSON.parse(xhr2.response);
                    for (var i = 0; i < res.length; i++) {
                        document.getElementsByClassName("photo")[i].src = res[i].image
                        document.getElementsByClassName("titlee")[i].innerHTML = res[i].title
                        document.getElementsByClassName("price")[i].innerHTML = res[i].price + "$"
                        document.querySelectorAll("img")[i].addEventListener("click", getClickID, true);

                    }
                }

            }
        }
        electronics()
            ///////////////functionid////////
        function getClickID(clickID) {
            var x = event.target.id
            saveCookie(x)
            location.href = "./product_detail.html"
        }

        function saveCookie(e) {
            var d = new Date();
            d.setMonth(d.getMonth() + 2);
            document.cookie = "idfetch=" + [e] + ";expires=" + d;
        }
    </script>

    <script>
        function search() {
            let input = document.getElementById('searchbar').value
            input = input.toLowerCase();
            let x = document.getElementsByClassName('product-box');

            for (i = 0; i < x.length; i++) {
                if (!x[i].innerHTML.toLowerCase().includes(input)) {
                    x[i].style.display = "none";
                } else {
                    x[i].style.display = "list-item";
                }
            }
        }
    </script>

    <script src="./js/script.js"></script>

</body>

</html>